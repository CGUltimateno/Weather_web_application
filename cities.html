<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="cities.css">
    <title>Cities</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
</head>
<body class="container">
<div class="left-bar">
        <div class="navbar">
            <div class="icon">
                <img src="imgs/4052984.png" alt="Weather Icon">
            </div>
            <div class="weathericon">
                <a class="nav-icons" href="index.html"><i class="fa-solid fa-cloud-sun"></i>Weather</a>
            </div>
            <div class="citiesicon">
                <a class="weather" href="cities.html"><i class="fa-solid fa-list"></i>Cities</a>
            </div>
            <div class="Settings">
                <a class="nav-icons" href="settings.html"><i class="fa-solid fa-sliders"></i>Settings</a>
            </div>
        </div>
    </div>
<div class="middle-bar">
    <div class="search-bar">
        <form class="search" role="searchfield" action="">
            <label>
                <input class="search-font" type="text" placeholder="Search for cities">
            </label>
        </form>
    </div>
    <div class="cities">
        <img src="/imgs/sunny.png" class="city-img">
        <div class="city-info">
            <div class="city-name">
                <h1 class="city">Madrid</h1>
                <p class="time">20:11</p>
            </div>
            <div class="city-degree">
                <h1 class="degree">31°</h1>
            </div>
        </div>
    </div>
    <div class="cities">
        <img src="/imgs/partly cloudy.png" class="city-img">
        <div class="city-info">
            <div class="city-name">
                <h1 class="city">Tokyo</h1>
                <p class="time">21:11</p>
            </div>
            <div class="city-degree">
                <h1 class="degree">29°</h1>
            </div>
        </div>
    </div>
    <div class="cities">
        <img src="/imgs/rain.png"  class="city-img">
        <div class="city-info">
            <div class="city-name">
                <h1 class="city">Vienna</h1>
                <p class="time">12:11</p>
            </div>
            <div class="city-degree">
                <h1 class="degree">36°</h1>
            </div>
        </div>
    </div>
    <div class="cities">
        <img src="/imgs/partly cloudy.png"  class="city-img">
        <div class="city-info">
            <div class="city-name">
                <h1 class="city">Cairo</h1>
                <p class="time">01:11</p>
            </div>
            <div class="city-degree">
                <h1 class="degree">35°</h1>
            </div>
        </div>
    </div>
</div>
<script>
    function getSelectedUnit(category) {
        return localStorage.getItem(`selected${category}Unit`);
    }

    const format12HourTime = (hour24, minute) => {
        const suffix = hour24 >= 12 ? 'PM' : 'AM';
        let hour12 = hour24 > 12 ? hour24 - 12 : hour24;
        hour12 = hour12 === 0 ? 12 : hour12; // handle 0 as 12 AM
        return `${hour12}:${minute} ${suffix}`;
    }

    document.addEventListener('DOMContentLoaded', () => {
        function updateTemperatureUnits(selectedUnit) {
            const degreeElements = document.querySelectorAll('.degree');

            degreeElements.forEach(degreeElement => {
                const currentTemperature = parseFloat(degreeElement.innerText);
                const convertedTemperature = selectedUnit === 'celsius' ? currentTemperature : convertToFahrenheit(currentTemperature);
                degreeElement.innerText = `${Math.round(convertedTemperature)}°`;
            });
        }

        function convertToFahrenheit(celsiusTemperature) {
            // Convert Celsius to Fahrenheit
            return (celsiusTemperature * 9 / 5) + 32;
        }

        const initialSelectedUnit = getSelectedUnit('Temperature');
        updateTemperatureUnits(initialSelectedUnit);

        const is12Hour = localStorage.getItem('checkbox12HourTimeChecked') === 'true';
        const timeElement = document.querySelector('.time');
        const timeParts = timeElement.innerText.split(':');
        const hour24 = parseInt(timeParts[0]);
        const minute = timeParts[1];

        if (is12Hour) {
            timeElement.innerText = format12HourTime(hour24, minute);
        }
    });
</script>
</body>
</html>