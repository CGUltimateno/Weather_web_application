<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="cities.css">
    <title>Cities</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
</head>
<body class="container">
<div class="left-bar">
    <div class="navbar">
        <div class="icon">
            <img src="imgs/4052984.png" alt="Weather Icon">
        </div>
        <div class="weathericon">
            <a class="weather" href="index.html"><i class="fa-solid fa-cloud-sun"></i>Weather</a>
        </div>
        <div class="citiesicon">
            <a class="nav-icons" href="cities.html"><i class="fa-solid fa-list"></i>Cities</a>
        </div>
        <div class="citiesicon">
            <a class="map-icon" href="map.html"><i class="fa-solid fa-map"></i><br/>Map</a>
        </div>
        <div class="Settings">
            <a class="nav-icons" href="settings.html"><i class="fa-solid fa-sliders"></i>Settings</a>
        </div>
    </div>
</div>
<div class="middle-bar">
    <br><br>
    <div class="cities">
        <img id="img1" src="imgs/sunny.png" class="city-img">
        <div class="city-info">
            <div class="city-name">
                <h1 id="city1" class="city">Cairo</h1>
            </div>
            <div class="city-degree">
                <h2 style="font-weight: 200;" id="desc1">Sunny</h2>
            </div>
            <div class="city-degree">
                <h1 id="temp1" class="degree">31°</h1>
            </div>
        </div>
    </div>
    <div class="cities">
        <img id="img2" src="imgs/sunny.png" class="city-img">
        <div class="city-info">
            <div class="city-name">
                <h1 id="city2" class="city">London</h1>
            </div>
            <div class="city-degree">
                <h2 style="font-weight: 200;" id="desc2">Sunny</h2>
            </div>
            <div class="city-degree">
                <h1 id="temp2" class="degree">31°</h1>
            </div>
        </div>
    </div>
    <div class="cities">
        <img id="img3" src="imgs/sunny.png" class="city-img">
        <div class="city-info">
            <div class="city-name">
                <h1 id="city3" class="city">New York</h1>
            </div>
            <div class="city-degree">
                <h2 style="font-weight: 200;" id="desc3">Sunny</h2>
            </div>
            <div class="city-degree">
                <h1 id="temp3" class="degree">31°</h1>
            </div>
        </div>
    </div>
    <div class="cities">
        <img id="img4" src="imgs/sunny.png" class="city-img">
        <div class="city-info">
            <div class="city-name">
                <h1 id="city4" class="city">Madrid</h1>
            </div>
            <div class="city-degree">
                <h2 style="font-weight: 200;" id="desc4">Sunny</h2>
            </div>
            <div class="city-degree">
                <h1 id="temp4" class="degree">31°</h1>
            </div>
        </div>
    </div>
    <div class="cities">
        <img id="img5" src="imgs/sunny.png" class="city-img">
        <div class="city-info">
            <div class="city-name">
                <h1 id="city5" class="city">Paris</h1>
            </div>
            <div class="city-degree">
                <h2 style="font-weight: 200;" id="desc5">Sunny</h2>
            </div>
            <div class="city-degree">
                <h1 id="temp5" class="degree">31°</h1>
            </div>
        </div>
    </div>
    <div class="cities">
        <img id="img6" src="imgs/sunny.png" class="city-img">
        <div class="city-info">
            <div class="city-name">
                <h1 id="city6" class="city">Rome</h1>
            </div>
            <div class="city-degree">
                <h2 style="font-weight: 200;" id="desc6">Sunny</h2>
            </div>
            <div class="city-degree">
                <h1 id="temp6" class="degree">31°</h1>
            </div>
        </div>
    </div>

    
</div>
<script>
    async function fetchData(i) {
        const cityName = document.querySelector(`#city${i}`).innerHTML;
        const response = await fetch(`https://api.weatherbit.io/v2.0/current?city=${cityName}&key=3925b593c06c44cabcc9acbea78508ba`);

        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }

        const data = await response.json();
        const { weather, temp } = data.data[0];
        const { description, code: code2 } = weather;

        document.querySelector(`#desc${i}`).innerHTML = description;
        document.querySelector(`#temp${i}`).innerHTML = `${temp}°`;
        const weatherImages = { 800: 'sunny', 801: 'partlyCloudy', 802: 'partlyCloudy', 803: 'partlyCloudy', 804: 'cloudy', 700: 'cloudy', 711: 'cloudy', 721: 'cloudy',
            741: 'cloudy', 751: 'cloudy', 611: 'cloudy', 612: 'cloudy', 900: 'rain', 522: 'rain', 520: 'rain', 511: 'rain', 502: 'rain', 501: 'rain', 500: 'rain',
            300: 'rain', 301: 'rain', 302: 'rain' };
        const imageName = weatherImages[code2] || 'partlyCloudy';

        document.querySelector(`#img${i}`).src = `imgs/${imageName}.png`;
        document.querySelector(`#img${i}`).alt = description;
    }

    for (let i = 1; i <= 6; i++) {
        fetchData(i).catch(error => console.error('Fetch error:', error));
    }

    document.addEventListener("DOMContentLoaded", function () {

        const citiesElements = document.querySelectorAll('.cities-w');


        const detElements = document.querySelectorAll('.det');


        citiesElements.forEach((cityElement, index) => {
            cityElement.addEventListener('click', function () {

                detElements.forEach(detElement => {
                    detElement.style.display = 'none';
                });


                detElements[index].style.display = 'block';
            });
        });
    });
</script>
</body>
</html>